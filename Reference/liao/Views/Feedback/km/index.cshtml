@{
    ViewData["PageTitle"] = "បញ្ចេញមតិយោបល់មកពួកយើង";
    ViewData["PageDescription"] = "រាល់ការបញ្ចេញមតិយោបល់របស់អតិថិជន គឺជាការចូលរួមចំណែក កែលម្អសេវាកម្មរបស់ធនាគារយើងខ្ញុំ។ សូមធ្វើការបញ្ចេញមតិយោបល់របស់លោកអ្នកតាមរយៈ ទម្រង់បញ្ចេញមតិយោបល់ របស់ធនាគារយើងខ្ញុំ។ ការបញ្ចេញមតិយោបល់ ឬ បណ្តឹងរបស់លោកអ្នកនឹងត្រូវបានដោះស្រាយក្នុងរយៈពេលដូចបានកំណត់ក្នុងនីតិវិធីផ្ទៃក្នុង បន្ទាប់ពីថ្ងៃទទួលទម្រង់បញ្ចេញមតិយោបល់។ សូមអរគុណ!";
}
@section Scripts {
    <script src="/assets/js/purify.js"></script>
    <script nonce="NhOc3wZFJ7hZvX9oqCrl/g">
        const urlImg = '@Url.Content("~/")' + 'Feedback/ReadCaptcha';//
        const url = '@Url.Content("~/")' + 'Feedback/SummitData';
        $(function () {
            getCaptcha();
        });
        function getCaptcha() {
            //alert(urlImg);
            var obj = new Object();
            $.ajax({
                type: "GET",
                async:false,
                url: urlImg,
                data: JSON.stringify(obj),
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                success: function (data) {
                    //alert(JSON.stringify(textStatus));
                    const imgStr = "data:image/jpeg;base64," + data.Data.PictureBase64;
                    //alert(imgStr);
                    $("#imgCaptcha").attr("src", imgStr);
                    //ShowMsg(data.responseText);
                },
                error: function (xhr, textStatus) {
                    ShowMsg(xhr.responseText);
                }
            });
        }
        function onSubmit() {
            ClearMsg();
            //alert('submit');
            var obj = new Object();
            obj.chkaccept = "Y";
            if ($("#branch").val() === "") {
                obj.chkaccept = "N";
                if (!$("#branch").hasClass('is-invalid'))
                    $("#branch").toggleClass('is-invalid');
            } else {
                obj.slBranch = $("#branch").val();
                $("#branch").removeClass('is-invalid');
            }

            if ($("#name").val() === "") {
                obj.chkaccept = "N";
                if (!$("#name").hasClass('is-invalid'))
                    $("#name").toggleClass('is-invalid');
            } else {
                obj.txtName = $("#name").val();
                $("#name").removeClass('is-invalid');
            }

            if ($("#email").val() === "") {
                obj.chkaccept = "N";
                if (!$("#email").hasClass('is-invalid'))
                    $("#email").toggleClass('is-invalid');
            } else {
                obj.txtEmail = $("#email").val();
                $("#email").removeClass('is-invalid');
            }

            if ($("#acountNumber").val() === "") {
                obj.chkaccept = "N";
                if (!$("#acountNumber").hasClass('is-invalid'))
                    $("#acountNumber").toggleClass('is-invalid');
            } else {
                obj.txtAccountNo = $("#acountNumber").val();
                $("#acountNumber").removeClass('is-invalid');
            }

            if ($("#phone").val() === "") {
                obj.chkaccept = "N";
                if (!$("#phone").hasClass('is-invalid'))
                    $("#phone").toggleClass('is-invalid');
            } else {
                obj.txtPhone = $("#phone").val();
                $("#phone").removeClass('is-invalid');
            }

            if ($("#dateTime").val() === "") {
                obj.chkaccept = "N";
                if (!$("#dateTime").hasClass('is-invalid'))
                    $("#dateTime").toggleClass('is-invalid');
            } else {
                obj.date = $("#dateTime").val();
                $("#dateTime").removeClass('is-invalid');
            }

            if ($("#service").val() === "") {
                obj.chkaccept = "N";
                if (!$("#service").hasClass('is-invalid'))
                    $("#service").toggleClass('is-invalid');
            } else {
                obj.slServices = $("#service").val();
                $("#service").removeClass('is-invalid');
            }

            if ($("#comments").val() === "") {
                obj.chkaccept = "N";
                if (!$("#comments").hasClass('is-invalid'))
                    $("#comments").toggleClass('is-invalid');
            } else {
                obj.txtAreaCom = $("#comments").val();
                $("#comments").removeClass('is-invalid');
            }

            if ($("#txtCaptcha").val() === "") {
                $("#errCaptcha").show();
                obj.chkaccept = "N";
            } else {
                obj.txtCaptcha = $("#txtCaptcha").val();
                $("#errCaptcha").hide();
            }
            //alert(url);
            //obj.txtAreaCom = "txtAreaCom";
            if (obj.chkaccept === "Y") {
                $.ajax({
                    type: "POST",
                    url: url,
                    data: JSON.stringify(obj),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (data, textStatus, xhr) {
                        //alert(JSON.stringify(textStatus));
                        //alert(JSON.stringify(data));
                        ShowMsg(data.ReturnMessage);
                    },
                    error: function (xhr, textStatus, errorThrown) {
                        //alert('failed');
                        ShowMsg(xhr.responseText);
                    }
                });
            }
        }
        function ShowMsg(str) {
            $("#showmsg").html(DOMPurify.sanitize(str)).css({ "color": "red", "font-size": "200%" });
        }
        function ClearMsg() {
            $("#showmsg").html("");
        }

    </script>
}

<!-- Page START -->
<main class="mastbody">

    <!--
        បញ្ចេញមតិយោបល់មកពួកយើង
    -->
    <div class="topkv kv  kv--txt-left">
        <div class="kv-bg">
            <div class="kv-bg-inner">
                <figure class="kv-bg-img">
                    <picture>
                        <source media="(min-width:769px)" srcset="/assets/img/topkv/feedback.jpg" />
                        <img srcset="/assets/img/topkv/feedback-mb.jpg">
                    </picture>
                </figure>
            </div>
        </div>
        <div class="kv-cont">
            <div class="kv-cont-inner">
                <h1 class="display-1  fw-bold lh-xs">បញ្ចេញមតិយោបល់មកពួកយើង</h1>
            </div>
        </div>
    </div>

    <!-- Breadcrumb  (lays on top of .topkv if places right after it) -->
    <nav class="breadcrumb-nav text-white" aria-label="breadcrumb">
        <div class="fluid">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="@ViewData["siteLangUrl"]"><span>ទំព័រដើម</span><i class="ico-ui-home"></i></a></li>
                <li class="breadcrumb-item active" aria-current="page">បញ្ចេញមតិយោបល់មកពួកយើង</li>
            </ol>
        </div>
    </nav>

    <!--
        បញ្ចេញមតិយោបល់មកពួកយើង - Detail
    -->
    <section class="fluid overflow-hidden">
        <div class="py-page"></div>

        <div class="compact">
            <p>រាល់ការបញ្ចេញមតិយោបល់របស់អតិថិជន គឺជាការចូលរួមចំណែក កែលម្អសេវាកម្មរបស់ធនាគារយើងខ្ញុំ។ សូមធ្វើការបញ្ចេញមតិយោបល់របស់លោកអ្នកតាមរយៈ ទម្រង់បញ្ចេញមតិយោបល់ របស់ធនាគារយើងខ្ញុំ។ ការបញ្ចេញមតិយោបល់ ឬ បណ្តឹងរបស់លោកអ្នកនឹងត្រូវបានដោះស្រាយក្នុងរយៈពេលដូចបានកំណត់ក្នុងនីតិវិធីផ្ទៃក្នុង បន្ទាប់ពីថ្ងៃទទួលទម្រង់បញ្ចេញមតិយោបល់។ សូមអរគុណ! </p>

            <div class="py-section"></div>

            <!--
                Form
            -->
            <!-- Gray container -->
            <div class="bg-gray-100  px-3 py-4 px-sm-4 px-lg-5">

                <!-- Form fields START -->
                <div class="form-row">
                    <div class="form-group col">
                        <label for="branch">សាខា</label>
                        <select class="custom-select" id="branch" required>
                            <option value="" selected>សូមជ្រើសរើស</option>
                            <option value="headoffice">ការិយាល័យកណ្តាល</option>
                            <option value="branch-nehru">សាខា នេរុហ៍</option>
                            <option value="branch-maotsetoung">សាខា ម៉ៅសេទុង</option>
                            <option value="branch-toultumpoung">សាខា ទួលទំពូង២</option>
                            <option value="branch-chaomchau">សាខា ចោមចៅ</option>
                            <option value="branch-phsarhengly">សាខា ផ្សារហេងលី</option>
                            <option value="branch-chbarampov">សាខា ច្បារអំពៅ</option>
                            <option value="branch-statchas">សាខា ស្តាតចាស់</option>
                            <option value="branch-stuengmeanchey">សាខា ស្ទឹងមានជ័យ</option>
                            <option value="branch-saensokh">សាខា សែនសុខ</option>
                            <option value="branch-siemreap">សាខា ខេត្តសៀមរាប</option>
                            <option value="branch-sihanoukville">សាខា ក្រុងព្រះសីហនុ</option>
                            <option value="branch-battambang">សាខា ខេត្តបាត់ដំបង</option>
                            <option value="branch-kampongcham">សាខា ខេត្តកំពង់ចាម</option>
                            <option value="branch-bavet">សាខា ក្រុងបាវិត</option>
                            <option value="exchangeoffice-monivong">បញ្ជរប្តូរប្រាក់មុនីវង្ស</option>
                        </select>
                        <div class="invalid-feedback">សូមពិនិត្យមើលទិន្នន័យបញ្ចូលរបស់អ្នក។</div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="name">ឈ្មោះអតិថិជន</label>
                        <input type="text" class="form-control" id="name" placeholder="ឈ្មោះអតិថិជន" required>
                        <div class="invalid-feedback">សូមពិនិត្យមើលទិន្នន័យបញ្ចូលរបស់អ្នក។</div>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="email">អាសយដ្ឋានអ៊ីមែល</label>
                        <input type="email" class="form-control" id="email" placeholder="អាសយដ្ឋានអ៊ីមែល" required>
                        <div class="invalid-feedback">សូមពិនិត្យមើលទិន្នន័យបញ្ចូលរបស់អ្នក។</div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="acountNumber">លេខគណនី</label>
                        <input type="text" class="form-control" id="acountNumber" placeholder="លេខគណនី" required>
                        <div class="invalid-feedback">សូមពិនិត្យមើលទិន្នន័យបញ្ចូលរបស់អ្នក។</div>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="phone">លេខទូរស័ព្ទ</label>
                        <input type="text" class="form-control" id="phone" placeholder="លេខទូរស័ព្ទ" required>
                        <div class="invalid-feedback">សូមពិនិត្យមើលទិន្នន័យបញ្ចូលរបស់អ្នក។</div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-md-6">
                        <label for="dateTime">កាលបរិច្ឆេទនៃហេតុការណ៍</label>
                        <input type="text" class="form-control" id="dateTime" placeholder="កាលបរិច្ឆេទនៃហេតុការណ៍" required>
                        <div class="invalid-feedback">សូមពិនិត្យមើលទិន្នន័យបញ្ចូលរបស់អ្នក។</div>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="service">ផលិតផល/សេវាកម្ម</label>
                        <select class="custom-select" id="service" required>
                            <option value="" selected>សូមជ្រើសរើស</option>
                            <option value="remittance">ការផ្ទេរប្រាក់</option>
                            <option value="loan">ឥណទាន</option>
                            <option value="atm">អេធីអឹម</option>
                            <option value="debit-card">ប័ណ្ណឥណ្ណពន្ធ</option>
                            <option value="credit-card">ប័ណ្ណឥណទាន</option>
                            <option value="saving-account">គណនីសន្សំ</option>
                            <option value="current-account">គណនីចរន្ត</option>
                            <option value="mobile-banking">ប្រត្តិបត្តិការធនាគារចល័ត</option>
                            <option value="other">សេវាកម្មផ្សេងៗ</option>
                        </select>
                        <div class="invalid-feedback">សូមពិនិត្យមើលទិន្នន័យបញ្ចូលរបស់អ្នក។</div>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group col-12">
                        <label for="comments"> ខ្លឹមសារនៃបណ្តឹង</label>
                        <textarea class="form-control" rows="5" id="comments" required></textarea>
                        <div class="invalid-feedback">សូមពិនិត្យមើលទិន្នន័យបញ្ចូលរបស់អ្នក។</div>
                    </div>
                </div>
                <!-- Form fields END -->

                <div class="text-center">
                    <div class="d-flex justify-content-center mb-3">
                        <input id="txtCaptcha" name="txtCaptcha" class="txt" type="text" autocomplete="off" placeholder="please input captcha code">
                        <img onclick="getCaptcha()" src="#" alt="" id="imgCaptcha" style="width: 110px; height: 48px; border-radius:5px;margin-left:5px;">
                    </div>
                    <div class="invalid-feedback" id="errCaptcha" style="margin-top:-10px;margin-bottom:10px;">សូមពិនិត្យមើលទិន្នន័យបញ្ចូលរបស់អ្នក។</div>
                    <button type="button" class="btn btn-green" onclick="onSubmit(); return false;">
                        <span class="px-2">យល់ព្រម<i class="ico-ui-right-v ml-2 big"></i></span>
                    </button>
                    <!-- 添加警告符號與描述文字 -->
                   <div style="margin-top: 15px; display: flex; align-items: center; justify-content: center;">
                        <!-- 警告符號圖片 -->
                        <img src="/assets/img/topkv/Warning-icon.png" alt="警告符號" style="width: 16px; height: 16px; margin-right: 3px;">
                        <!-- 描述文字 -->
                        <span style="font-size: 14px; color: #333;">
                            ករណីលោកអ្នកមិនបានបំពេញឈ្មោះ អាសយដ្ឋាន និងលេខទូរស័ព្ទ/អ៊ីម៉ែលឱ្យបានច្បាស់លាស់ទេ បណ្តឹងនេះត្រូវបានចាត់ទុកជាមោឃៈ ។
                        </span>
                    </div>
                </div>
            </div>

            <div class="py-60"></div>


            <!-- Downloads -->
            <p class="text-center">
                    <a class="btn btn-outline-green-dark rounded-pill  h4-mb" target="_blank" rel="noopener noreferrer" href="/file/Feedback Form.pdf">ទាញយកទម្រង់បញ្ចេញមតិយោបល់<i class="ico-ui-download ml-2"></i></a>
            </p>

        </div>

        <div class="py-page" id="showmsg"></div>
    </section>

</main>
<!-- Page END -->